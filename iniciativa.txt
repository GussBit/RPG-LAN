Sistema de Iniciativa - EspecificaÃ§Ã£o Detalhada
Vou organizar e melhorar esse pedido para vocÃª:

ğŸ“‹ Funcionalidades Solicitadas:
1. Campo de Iniciativa Individual
âœ… Input numÃ©rico no MobCard (GM view)

âœ… Input numÃ©rico na PlayerPrivateView (Player view)

âœ… Valor salvo individualmente para cada mob/player

âœ… VisÃ­vel sempre, mesmo fora de combate

2. Off-Canvas de Iniciativa (Lateral Direita)
âœ… Painel lateral retrÃ¡til/expansÃ­vel

âœ… Lista vertical com bolinhas coloridas

âœ… Cada bolinha herda a cor do personagem/mob

âœ… Iniciais do nome dentro da bolinha

âœ… OrdenaÃ§Ã£o automÃ¡tica (maior iniciativa = topo)

âœ… DisponÃ­vel para GM e Players

3. Sistema de "Rolar Iniciativa"
âœ… BotÃ£o "Rolar Iniciativa" (apenas GM pode ativar)

âœ… Quando ativado, abre modal para todos os jogadores

âœ… Jogador digita o valor e confirma

âœ… Valor salvo automaticamente no off-canvas

âœ… Mestre vÃª todos os valores em tempo real

4. Visual do Off-Canvas
text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ² INICIATIVA       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”  ZP    (23)   â”‚ â† Maior
â”‚ â””â”€â”€â”˜                â”‚
â”‚ â”Œâ”€â”€â”  MM    (18)   â”‚
â”‚ â””â”€â”€â”˜                â”‚
â”‚ â”Œâ”€â”€â”  IB    (12)   â”‚ â† Menor
â”‚ â””â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“ Arquivos a Serem Modificados:
Backend (server.js)
javascript
E:\RPG-LAN\backend\server.js
ModificaÃ§Ãµes:

âœ… Adicionar campo initiative no schema de mobs e players

âœ… Endpoint POST (broadcast para players)

âœ… Endpoint PUT (salvar iniciativa)

âœ… Endpoint PUT  (salvar iniciativa)

âœ… Socket.io event initiative-rolled (notificar players)

âœ… Socket.io event initiative-updated (atualizar em tempo real)

Frontend - Store (Zustand)
javascript
E:\RPG-LAN\frontend\src\store\store.js
ModificaÃ§Ãµes:

âœ… Estado initiativeTrackerOpen (controla off-canvas)

âœ… Estado rollInitiativeModal (controla modal)

âœ… Estado sortedInitiativeList (lista ordenada)

âœ… Action setPlayerInitiative(playerId, value)

âœ… Action setMobInitiative(mobId, value)

âœ… Action rollInitiativeForAll()

âœ… Action toggleInitiativeTracker()

âœ… Computed getInitiativeOrder() (ordenaÃ§Ã£o automÃ¡tica)

Frontend - Componentes a CRIAR:
1. InitiativeTracker.jsx (Off-Canvas Lateral)
javascript
E:\RPG-LAN\frontend\src\components\InitiativeTracker.jsx
Responsabilidades:

âœ… Off-canvas deslizante da direita

âœ… Lista vertical de participantes

âœ… Bolinhas coloridas com iniciais

âœ… OrdenaÃ§Ã£o automÃ¡tica por valor

âœ… BotÃ£o toggle para abrir/fechar

âœ… Responsivo mobile/desktop

2. InitiativeModal.jsx (Modal para Jogador)
javascript
E:\RPG-LAN\frontend\src\components\modals\InitiativeModal.jsx
Responsabilidades:

âœ… Modal que abre quando GM rola iniciativa

âœ… Input numÃ©rico grande e visÃ­vel

âœ… BotÃ£o "Confirmar Iniciativa"

âœ… ValidaÃ§Ã£o (apenas nÃºmeros)

âœ… Feedback visual apÃ³s confirmar

3. InitiativeButton.jsx (BotÃ£o Flutuante - GM)
javascript
E:\RPG-LAN\frontend\src\components\InitiativeButton.jsx
Responsabilidades:

âœ… BotÃ£o "ğŸ² Rolar Iniciativa" (apenas GM)

âœ… Dispara evento para todos os players

âœ… Abre modal para GM tambÃ©m

âœ… Visual destacado (cor especial)

Frontend - Componentes a MODIFICAR:
4. MobCard.jsx
javascript
E:\RPG-LAN\frontend\src\components\MobCard.jsx
Adicionar:

âœ… Input de iniciativa no card (pequeno, canto superior)

âœ… Badge mostrando valor atual

âœ… onChange atualiza store + backend

5. PlayerPrivateView.jsx
javascript
E:\RPG-LAN\frontend\src\components\player\PlayerPrivateView.jsx
Adicionar:

âœ… Input de iniciativa (ediÃ§Ã£o manual)

âœ… Badge mostrando valor atual

âœ… IntegraÃ§Ã£o com InitiativeModal

6. app.jsx
javascript
E:\RPG-LAN\frontend\src\components\app.jsx
Adicionar:

âœ… Renderizar <InitiativeButton />

âœ… Renderizar <InitiativeTracker />

âœ… Gerenciar estado de combate ativo

7. PlayerView.jsx
javascript
E:\RPG-LAN\frontend\src\components\player\PlayerView.jsx
Adicionar:

âœ… Renderizar <InitiativeTracker /> (read-only)

âœ… Renderizar <InitiativeModal /> (quando chamado)

âœ… Socket listener para initiative-rolled


sequenceDiagram
    GM->>Backend: Click "Rolar Iniciativa"
    Backend->>All Players: Socket "initiative-rolled"
    All Players->>All Players: Abre InitiativeModal
    Player1->>Backend: PUT initiative (15)
    Backend->>All Clients: Socket "initiative-updated"
    All Clients->>InitiativeTracker: Atualiza e reordena
ğŸ“Š Schema de Dados (Backend):
javascript
// Player Schema
{
  id: String,
  name: String,
  characterName: String,
  initiative: Number, // â† NOVO
  color: String,      // â† NOVO (para a bolinha)
  // ... outros campos
}

// Mob Schema

  initiative: Number, // â† NOVO


// Combat State
{
  isActive: Boolean,
  currentTurn: String, // ID do participante atual
  initiativeOrder: Array // IDs ordenados

  tenha liberdade para decidir o que Ã© melhor
}
âœ… Checklist de ImplementaÃ§Ã£o:

 Adicionar campos initiative e color nos schemas

 Criar endpoints de iniciativa

 Implementar Socket.io events

 Testar broadcast para players


 Adicionar estados de iniciativa

 Criar actions de manipulaÃ§Ã£o

 Implementar ordenaÃ§Ã£o automÃ¡tica

 Integrar com Socket.io


 Criar InitiativeTracker.jsx

 Criar InitiativeModal.jsx

 Criar InitiativeButton.jsx

 Testar responsividade


 Modificar MobCard.jsx

 Modificar PlayerPrivateView.jsx

 Modificar GMView.jsx

 Modificar PlayerView.jsx

 Testar rolar iniciativa como GM

 Testar input como jogador

 Testar ordenaÃ§Ã£o automÃ¡tica

 Testar sincronizaÃ§Ã£o em tempo real

 Testar responsividade mobile

ğŸš€ Por Onde ComeÃ§ar:
Eu sugiro implementar nesta ordem:

Backend primeiro (server.js) - Base de dados

Store (store.js) - LÃ³gica central

InitiativeTracker - Visual principal

InitiativeModal - InteraÃ§Ã£o do player

IntegraÃ§Ãµes - MobCard, PlayerView, etc.